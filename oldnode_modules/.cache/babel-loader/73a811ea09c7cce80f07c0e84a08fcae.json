{"ast":null,"code":"import _slicedToArray from\"C:/Users/Madjid Sadallah/Documents/GitHub/CoGenDash/lad-creator/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"../library-view.css\";import React,{useContext,useState}from\"react\";import Modal from\"react-bootstrap/Modal\";import{Button}from\"react-bootstrap\";import{CPanelContext}from\"../cpanels\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var chartContext=/*#__PURE__*/React.createContext();var CPanelItem=function CPanelItem(props){var _useContext=useContext(CPanelContext),_useContext2=_slicedToArray(_useContext,9),currentCPanel=_useContext2[0],setCurrentCPanel=_useContext2[1],currentPanel=_useContext2[2],setCurrentPanel=_useContext2[3],pList=_useContext2[4],setpList=_useContext2[5],panels=_useContext2[6],visualizations=_useContext2[7],indicators=_useContext2[8];var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentVisualization=_useState2[0],setCurrentVisualization=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),currentIndicator=_useState4[0],setCurrentIndicator=_useState4[1];var getPanElement=function getPanElement(i){panels.map(function(item){if(item.id==i)setCurrentPanel(item);});//console.log(currentPanel)\n};var getVizElement=function getVizElement(){var res={title:\" \",description:\" \",chart:null};if(!currentPanel)return res;visualizations.map(function(item){if(item.id==currentPanel.visualization_id)res=item;});var elt=visualizations.find(function(item){return item.id===currentPanel.visualization_id;});//setCurrentVisualization(res);\nreturn res;};var getIndElement=function getIndElement(){var res={title:\" \",description:\" \"};if(!currentPanel)return res;indicators.map(function(item){if(item.id==currentPanel.indicator_id)res=item;});//setCurrentIndicator(res);\nreturn res;};var decodeChart=function decodeChart(elt){if(!elt)return;var blob=elt.chart;if(!blob)return;if(typeof blob===\"string\")return blob;var data=blob.data;var img=new Buffer.from(data).toString(\"ascii\");return img;};return/*#__PURE__*/_jsx(_Fragment,{children:currentCPanel===undefined?\" \":/*#__PURE__*/_jsxs(Modal,{show:props.show,backdrop:\"static\",keyboard:true,size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",dialogClassName:\"modal-style\",scrollable:true,centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{children:/*#__PURE__*/_jsx(Modal.Title,{children:currentCPanel.title})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(\"table\",{className:\"table table-dark cpanel-tab\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"Select a panel to insert\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"select\",{className:\"formselect\",name:\"panel\",onChange:function onChange(e){return getPanElement(e.target.value);},children:panels.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item.id,children:item.title});})})})]}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{colSpan:\"2\",children:[\"Description : \",/*#__PURE__*/_jsx(\"i\",{children:currentPanel?currentPanel.description:''})]})}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\"Associated indicator : \",/*#__PURE__*/_jsx(\"b\",{children:getIndElement().title}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"i\",{children:getIndElement().description})]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"Associated visualization : \",/*#__PURE__*/_jsx(\"b\",{children:getVizElement().title}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"chart_box\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"Chart\",src:decodeChart(getVizElement())})})]})]})]})})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{type:\"button\",size:\"sm\",variant:\"secondary\",onClick:props.onClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",size:\"sm\",variant:\"secondary\",onClick:function onClick(){return props.onSave();},children:\"Save\"})]})]})});};export default CPanelItem;","map":{"version":3,"sources":["C:/Users/Madjid Sadallah/Documents/GitHub/CoGenDash/lad-creator/src/components/library/panels_lib/cpanel_items.js"],"names":["React","useContext","useState","Modal","Button","CPanelContext","chartContext","createContext","CPanelItem","props","currentCPanel","setCurrentCPanel","currentPanel","setCurrentPanel","pList","setpList","panels","visualizations","indicators","currentVisualization","setCurrentVisualization","currentIndicator","setCurrentIndicator","getPanElement","i","map","item","id","getVizElement","res","title","description","chart","visualization_id","elt","find","getIndElement","indicator_id","decodeChart","blob","data","img","Buffer","from","toString","undefined","show","e","target","value","onClose","onSave"],"mappings":"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","sourcesContent":["import \"../library-view.css\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { CPanelContext } from \"../cpanels\";\r\n\r\nexport const chartContext = React.createContext();\r\n\r\nconst CPanelItem = (props) => {\r\n  const [\r\n    currentCPanel,\r\n    setCurrentCPanel,\r\n    currentPanel,\r\n    setCurrentPanel,\r\n    pList,\r\n    setpList,\r\n    panels,\r\n    visualizations,\r\n    indicators,\r\n  ] = useContext(CPanelContext);\r\n\r\n  const [currentVisualization, setCurrentVisualization] = useState();\r\n  const [currentIndicator, setCurrentIndicator] = useState();\r\n\r\n  const getPanElement = (i) => {\r\n    panels.map((item) => {\r\n      if (item.id == i) \r\n        setCurrentPanel(item);\r\n        \r\n    });\r\n    //console.log(currentPanel)\r\n  };\r\n\r\n  const getVizElement = () => {\r\n    let res = {\r\n      title: \" \",\r\n      description: \" \",\r\n      chart: null,\r\n    };\r\n    if (!currentPanel) return res;\r\n    visualizations.map((item) => {\r\n      if (item.id == currentPanel.visualization_id) res = item;\r\n    });\r\n    let elt = visualizations.find((item) => item.id === currentPanel.visualization_id);\r\n    //setCurrentVisualization(res);\r\n    return res;\r\n  };\r\n\r\n  const getIndElement = () => {\r\n    let res = {\r\n      title: \" \",\r\n      description: \" \",\r\n    };\r\n    if (!currentPanel) return res;\r\n    indicators.map((item) => {\r\n      if (item.id == currentPanel.indicator_id) res = item;\r\n    });\r\n    //setCurrentIndicator(res);\r\n    return res;\r\n  };\r\n\r\n  const decodeChart = (elt) => {\r\n    if (!elt) return;\r\n    let blob = elt.chart;\r\n    if (!blob) return;\r\n    if (typeof blob === \"string\") return blob;\r\n    const { data } = blob;\r\n    const img = new Buffer.from(data).toString(\"ascii\");\r\n\r\n    return img;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {currentCPanel === undefined ? (\r\n        \" \"\r\n      ) : (\r\n        <Modal\r\n          show={props.show}\r\n          backdrop=\"static\"\r\n          keyboard={true}\r\n          size=\"lg\"\r\n          aria-labelledby=\"contained-modal-title-vcenter\"\r\n          dialogClassName=\"modal-style\"\r\n          scrollable\r\n          centered\r\n        >\r\n          <Modal.Header>\r\n            <Modal.Title>{currentCPanel.title}</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <table className=\"table table-dark cpanel-tab\">\r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    <b>Select a panel to insert</b>\r\n                  </td>\r\n                  <td>\r\n                    <select\r\n                      className=\"formselect\"\r\n                      name=\"panel\"\r\n                      onChange={(e) => getPanElement(e.target.value)}\r\n                    >\r\n                      {panels.map((item) => {\r\n                        return <option value={item.id}>{item.title}</option>;\r\n                      })}\r\n                    </select>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td colSpan=\"2\">\r\n                    Description : <i>{currentPanel? currentPanel.description:''}</i>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>\r\n                    Associated indicator : <b>{getIndElement().title}</b> <br />\r\n                    <i>{getIndElement().description}</i>\r\n                  </td>\r\n                  <td>\r\n                    Associated visualization : <b>{getVizElement().title}</b>{\" \"}\r\n                    <br />\r\n                    <div className=\"chart_box\">\r\n                      <img alt=\"Chart\" src={decodeChart(getVizElement())}  />\r\n                      {/* <span >{getVizElement().description}</span> */}\r\n                    </div>\r\n                    \r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button\r\n              type=\"button\"\r\n              size=\"sm\"\r\n              variant=\"secondary\"\r\n              onClick={props.onClose}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              size=\"sm\"\r\n              variant=\"secondary\"\r\n              onClick={()=>props.onSave()}\r\n            >\r\n              Save\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      )}\r\n    </>\r\n  );\r\n};\r\nexport default CPanelItem;\r\n"]},"metadata":{},"sourceType":"module"}