{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Madjid Sadallah/Documents/GitHub/CoGenDash/lad-creator/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/Madjid Sadallah/Documents/GitHub/CoGenDash/lad-creator/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./library-view.css\";import React,{useState,useEffect}from\"react\";import Actions from\"./indicators_lib/indicator_actions\";import axios from\"axios\";import{AddBoxRounded,EditRounded,HighlightOffRounded}from\"@material-ui/icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var IndicatorContext=/*#__PURE__*/React.createContext();function Indicators(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),indicators=_useState2[0],setIndicators=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showModal=_useState4[0],setShowModal=_useState4[1];var handleModalClose=function handleModalClose(){setShowModal(false);};var handleModalSave=function handleModalSave(){if(creationMode)axios.post(\"http://localhost:3001/indicators\",currentElement).then(function(){setIndicators([].concat(_toConsumableArray(indicators),[{data:currentElement,headers:{\"Content-Type\":\"multipart/form-data\"}}]));updateDisplay();});else axios.put(\"http://localhost:3001/indicators\",currentElement).then(function(res){setIndicators(indicators.map(function(item){return item.id===currentElement.id?{id:item.id,title:item.title,description:item.description,class:item.class}:item;}));updateDisplay();});setShowModal(false);updateDisplay();};var deleteIndicator=function deleteIndicator(id){window.confirm(\"Are you sure you want to delete this type of indicators?\")?axios.delete(\"http://localhost:3001/indicators/\".concat(id)).then(function(res){setIndicators(indicators.filter(function(item){return item.id!==id;}));}):id=id;updateDisplay();};var getIndicators=function getIndicators(){axios.get(\"http://localhost:3001/indicators\").then(function(res){setIndicators(res.data);});};useEffect(function(){getIndicators();},[]);var updateDisplay=function updateDisplay(){getIndicators();};var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),currentElement=_useState6[0],setCurrentElement=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),creationMode=_useState8[0],setCreationMode=_useState8[1];var indicatorContext=[currentElement,setCurrentElement];var CreateNewIndicator=function CreateNewIndicator(){var item={title:\"New\",description:\"Description\",class:\" \"};setCurrentElement(item);setCreationMode(true);setShowModal(true);return;};var EditIndicator=function EditIndicator(item){setCurrentElement(item);setCreationMode(false);setShowModal(true);};return/*#__PURE__*/_jsxs(IndicatorContext.Provider,{value:indicatorContext,children:[/*#__PURE__*/_jsx(Actions,{title:\"un titre\",show:showModal,mode:\"Creation\",indicators:indicators,setIndicators:setIndicators,updateDisplay:updateDisplay,onClose:handleModalClose,onSave:handleModalSave}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-success\",onClick:CreateNewIndicator,children:[/*#__PURE__*/_jsx(AddBoxRounded,{}),\" \\xA0 New indicator type\"]})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered table-hover table-dark table-striped text-md-start\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Class\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:indicators.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:item.id}),/*#__PURE__*/_jsx(\"td\",{children:item.title}),/*#__PURE__*/_jsx(\"td\",{children:item.class}),/*#__PURE__*/_jsx(\"td\",{children:item.description}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-primary\",onClick:function onClick(){return EditIndicator(item);},children:/*#__PURE__*/_jsx(EditRounded,{})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-danger\",onClick:function onClick(){return deleteIndicator(item.id);},children:/*#__PURE__*/_jsx(HighlightOffRounded,{})})]})]},item.id);})})]})]});}export default Indicators;","map":{"version":3,"sources":["C:/Users/Madjid Sadallah/Documents/GitHub/CoGenDash/lad-creator/src/components/library/indicators.js"],"names":["React","useState","useEffect","Actions","axios","AddBoxRounded","EditRounded","HighlightOffRounded","IndicatorContext","createContext","Indicators","indicators","setIndicators","showModal","setShowModal","handleModalClose","handleModalSave","creationMode","post","currentElement","then","data","headers","updateDisplay","put","res","map","item","id","title","description","class","deleteIndicator","window","confirm","delete","filter","getIndicators","get","setCurrentElement","setCreationMode","indicatorContext","CreateNewIndicator","EditIndicator"],"mappings":"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","sourcesContent":["import \"./library-view.css\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Actions from \"./indicators_lib/indicator_actions\";\r\nimport axios from \"axios\";\r\nimport {\r\n  AddBoxRounded,\r\n  EditRounded,\r\n  HighlightOffRounded,\r\n} from \"@material-ui/icons\";\r\n\r\nexport const IndicatorContext = React.createContext();\r\n\r\nfunction Indicators() {\r\n  const [indicators, setIndicators] = useState([]);\r\n\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  const handleModalClose = () => {\r\n    setShowModal(false);\r\n  };\r\n\r\n  const handleModalSave = () => {\r\n    if (creationMode)\r\n      axios\r\n        .post(\"http://localhost:3001/indicators\", currentElement)\r\n        .then(() => {\r\n          setIndicators([\r\n            ...indicators,\r\n            {\r\n              data: currentElement,\r\n              headers: { \"Content-Type\": \"multipart/form-data\" },\r\n            },\r\n          ]);\r\n          updateDisplay();\r\n        });\r\n    else\r\n      axios\r\n        .put(\"http://localhost:3001/indicators\", currentElement)\r\n        .then((res) => {\r\n          setIndicators(\r\n            indicators.map((item) => {\r\n              return item.id === currentElement.id\r\n                ? {\r\n                    id: item.id,\r\n                    title: item.title,\r\n                    description: item.description,\r\n                    class: item.class,\r\n                  }\r\n                : item;\r\n            })\r\n          );\r\n          updateDisplay();\r\n        });\r\n\r\n    setShowModal(false);\r\n    updateDisplay();\r\n  };\r\n\r\n  const deleteIndicator = (id) => {\r\n    window.confirm(\r\n      \"Are you sure you want to delete this type of indicators?\"\r\n    )\r\n      ? axios\r\n          .delete(`http://localhost:3001/indicators/${id}`)\r\n          .then((res) => {\r\n            setIndicators(\r\n              indicators.filter((item) => {\r\n                return item.id !== id;\r\n              })\r\n            );\r\n          })\r\n      : (id = id);\r\n    updateDisplay();\r\n  };\r\n\r\n  const getIndicators = () => {\r\n    axios.get(\"http://localhost:3001/indicators\").then((res) => {\r\n      setIndicators(res.data);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getIndicators();\r\n  }, []);\r\n\r\n  const updateDisplay = () => {\r\n    getIndicators();\r\n  };\r\n\r\n\r\n  const [currentElement, setCurrentElement] = useState();\r\n  const [creationMode, setCreationMode] = useState(true);\r\n  const indicatorContext = [currentElement, setCurrentElement];\r\n\r\n  const CreateNewIndicator = () => {\r\n    const item = {\r\n      title: \"New\",\r\n      description: \"Description\",\r\n      class: \" \",\r\n    };\r\n\r\n    setCurrentElement(item);\r\n    setCreationMode(true);\r\n    setShowModal(true);\r\n\r\n    return;\r\n  };\r\n  const EditIndicator = (item) => {\r\n    setCurrentElement(item);\r\n    setCreationMode(false);\r\n    setShowModal(true);\r\n  };\r\n  return (\r\n    <IndicatorContext.Provider value={indicatorContext}>\r\n      <Actions\r\n        title=\"un titre\"\r\n        show={showModal}\r\n        mode=\"Creation\"\r\n        indicators={indicators}\r\n        setIndicators={setIndicators}\r\n        updateDisplay={updateDisplay}\r\n        onClose={handleModalClose}\r\n        onSave={handleModalSave}\r\n      />\r\n\r\n      <div>\r\n        <button className=\"btn btn-success\" onClick={CreateNewIndicator}>\r\n          <AddBoxRounded /> &nbsp; New indicator type\r\n        </button>\r\n      </div>\r\n      <table className=\"table table-bordered table-hover table-dark table-striped text-md-start\">\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\">#</th>\r\n            <th scope=\"col\">Name</th>\r\n            <th scope=\"col\">Class</th>\r\n            <th scope=\"col\">Description</th>\r\n            <th scope=\"col\">Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {indicators.map((item) => {\r\n            return (\r\n              <tr key={item.id}>\r\n                <th scope=\"row\">{item.id}</th>\r\n                <td>{item.title}</td>\r\n                <td>{item.class}</td>               \r\n                <td>{item.description}</td>\r\n\r\n                <td>\r\n                  <button\r\n                    className=\"btn btn-sm btn-outline-primary\"\r\n                    onClick={() => EditIndicator(item)}\r\n                  >\r\n                    <EditRounded />\r\n                  </button>\r\n                  <button\r\n                    className=\"btn btn-sm btn-outline-danger\"\r\n                    onClick={() => deleteIndicator(item.id)}\r\n                  >\r\n                    <HighlightOffRounded />\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </IndicatorContext.Provider>\r\n  );\r\n}\r\n\r\nexport default Indicators;"]},"metadata":{},"sourceType":"module"}