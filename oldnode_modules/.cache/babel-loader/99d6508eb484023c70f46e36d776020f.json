{"ast":null,"code":"import _objectSpread from\"C:/Users/Madjid Sadallah/Documents/GitHub/CoGenDash/lad-creator/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Madjid Sadallah/Documents/GitHub/CoGenDash/lad-creator/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import ReactJson from\"react-json-view\";import jsonfile from\"jsonfile\";import dash from\"../../../data/template_dash.json\";import{AppContext}from\"../specification-wizard\";import\"./generate-component.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var GenerateComponent=function GenerateComponent(){var _useContext=useContext(AppContext),_useContext2=_slicedToArray(_useContext,2),ladContext=_useContext2[0],setLadContext=_useContext2[1];var filename=\"generated_dashboard\";var fileData=JSON.stringify(dash);var blob=new Blob([fileData],{type:\"text/plain\"});var _useState=useState(),_useState2=_slicedToArray(_useState,2),mainPanel=_useState2[0],setMainPanel=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),comprehensionFrames=_useState4[0],setComprehensionFrames=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),dashMeta=_useState6[0],setDashMeta=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),file=_useState8[0],setFile=_useState8[1];var generateMeta=function generateMeta(){setDashMeta({id:null,uid:\"cLV5GDCkz\",title:ladContext.Title,tags:[],style:\"dark\",timezone:\"browser\",editable:true,hideControls:false,graphTooltip:1});};var generateMainFrame=function generateMainFrame(){setMainPanel({type:ladContext.mainFrame.graphic,title:ladContext.mainFrame.indicator,gridPos:{x:0,y:0,w:12,h:9},id:4,mode:\"markdown\",content:\"# title\"});};var generateOneFrame=function generateOneFrame(data){return{type:data.graphic,title:data.framename,gridPos:{x:0,y:0,w:12,h:9},id:data.id,mode:\"markdown\",content:\"# title\"};};var generateComprehensionFrames=function generateComprehensionFrames(){//console.log(ladContext.comprehensionFrames); return;\nladContext.comprehensionFrames.map(function(f){setComprehensionFrames(comprehensionFrames.concat(generateOneFrame(f)));});};var generateJsonStructure=function generateJsonStructure(){generateMainFrame();generateMeta();generateComprehensionFrames();console.log(comprehensionFrames);//  setFile(dashMeta);\nvar p=[];p=p.concat(mainPanel);p=p.concat(comprehensionFrames);var f=_objectSpread(_objectSpread({},file),dashMeta);setFile(_objectSpread(_objectSpread(_objectSpread({},file),dashMeta),{},{panels:p}));return;setFile({time:{from:\"now-6h\",to:\"now\"},timepicker:{time_options:[],refresh_intervals:[]},templating:{list:[]},annotations:{list:[]},refresh:\"5s\",schemaVersion:17,version:0,links:[]});};var saveJSonFile=function saveJSonFile(){var url=URL.createObjectURL(blob);var link=document.createElement(\"a\");link.download=\"\".concat(filename,\".json\");link.href=url;link.click();var file=new File([\"Hello, world!\"],\" \");//FileSaver.saveAs(file);\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"  row\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"bg-secondary card-header d-flex flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"p-2 col-sm-6\",children:\"Dashboard JSon structure\"}),/*#__PURE__*/_jsx(\"div\",{class:\"p-2 text-right col-sm-3\",children:/*#__PURE__*/_jsx(\"span\",{className:\"btn btn-primary btn-sm \",onClick:generateJsonStructure,children:\"Generat the structure\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"p-2 text-right col-sm-3\",children:/*#__PURE__*/_jsx(\"span\",{className:\"btn btn-success btn-sm \",onClick:saveJSonFile,children:\"Save the dashboard\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body bg-light\",children:/*#__PURE__*/_jsx(ReactJson,{src:file,collapsible:true,view:\"dual\"})})]});};export default GenerateComponent;","map":{"version":3,"sources":["C:/Users/Madjid Sadallah/Documents/GitHub/CoGenDash/lad-creator/src/components/specification/steps/generate-component.js"],"names":["React","useState","useContext","ReactJson","jsonfile","dash","AppContext","GenerateComponent","ladContext","setLadContext","filename","fileData","JSON","stringify","blob","Blob","type","mainPanel","setMainPanel","comprehensionFrames","setComprehensionFrames","dashMeta","setDashMeta","file","setFile","generateMeta","id","uid","title","Title","tags","style","timezone","editable","hideControls","graphTooltip","generateMainFrame","mainFrame","graphic","indicator","gridPos","x","y","w","h","mode","content","generateOneFrame","data","framename","generateComprehensionFrames","map","f","concat","generateJsonStructure","console","log","p","panels","time","from","to","timepicker","time_options","refresh_intervals","templating","list","annotations","refresh","schemaVersion","version","links","saveJSonFile","url","URL","createObjectURL","link","document","createElement","download","href","click","File"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport ReactJson from \"react-json-view\";\r\nimport jsonfile from \"jsonfile\";\r\nimport dash from \"../../../data/template_dash.json\";\r\nimport { AppContext } from \"../specification-wizard\";\r\n\r\nimport \"./generate-component.css\";\r\nconst GenerateComponent = () => {\r\n  const [ladContext, setLadContext] = useContext(AppContext);\r\n\r\n  const filename = \"generated_dashboard\";\r\n  const fileData = JSON.stringify(dash);\r\n  const blob = new Blob([fileData], { type: \"text/plain\" });\r\n\r\n  const [mainPanel, setMainPanel] = useState();\r\n  const [comprehensionFrames, setComprehensionFrames] = useState([]);\r\n  const [dashMeta, setDashMeta] = useState();\r\n\r\n  const [file, setFile] = useState();\r\n\r\n  const generateMeta = () => {\r\n    setDashMeta({\r\n      id: null,\r\n      uid: \"cLV5GDCkz\",\r\n      title: ladContext.Title,\r\n      tags: [],\r\n      style: \"dark\",\r\n      timezone: \"browser\",\r\n      editable: true,\r\n      hideControls: false,\r\n      graphTooltip: 1,\r\n    });\r\n  };\r\n\r\n  const generateMainFrame = () => {\r\n    setMainPanel({\r\n      type: ladContext.mainFrame.graphic,\r\n      title: ladContext.mainFrame.indicator,\r\n      gridPos: {\r\n        x: 0,\r\n        y: 0,\r\n        w: 12,\r\n        h: 9,\r\n      },\r\n      id: 4,\r\n      mode: \"markdown\",\r\n      content: \"# title\",\r\n    });\r\n  };\r\n\r\n  const generateOneFrame = (data) => {\r\n    return {\r\n      type: data.graphic,\r\n      title: data.framename,\r\n      gridPos: {\r\n        x: 0,\r\n        y: 0,\r\n        w: 12,\r\n        h: 9,\r\n      },\r\n      id: data.id,\r\n      mode: \"markdown\",\r\n      content: \"# title\",\r\n    };\r\n  };\r\n  const generateComprehensionFrames = () => {\r\n    //console.log(ladContext.comprehensionFrames); return;\r\n    ladContext.comprehensionFrames.map((f) => {\r\n      setComprehensionFrames(comprehensionFrames.concat(generateOneFrame(f)));\r\n    });\r\n  };\r\n\r\n  const generateJsonStructure = () => {\r\n    generateMainFrame();\r\n    generateMeta();\r\n    generateComprehensionFrames();\r\n    console.log(comprehensionFrames);\r\n    //  setFile(dashMeta);\r\n    let p = [];\r\n    p = p.concat(mainPanel);\r\n    p = p.concat(comprehensionFrames);\r\n    const f = { ...file, ...dashMeta };\r\n    setFile({ ...file, ...dashMeta, panels: p });\r\n    return;\r\n\r\n    setFile({\r\n      time: {\r\n        from: \"now-6h\",\r\n        to: \"now\",\r\n      },\r\n      timepicker: {\r\n        time_options: [],\r\n        refresh_intervals: [],\r\n      },\r\n      templating: {\r\n        list: [],\r\n      },\r\n      annotations: {\r\n        list: [],\r\n      },\r\n      refresh: \"5s\",\r\n      schemaVersion: 17,\r\n      version: 0,\r\n      links: [],\r\n    });\r\n  };\r\n  const saveJSonFile = () => {\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement(\"a\");\r\n    link.download = `${filename}.json`;\r\n    link.href = url;\r\n    link.click();\r\n\r\n    var file = new File([\"Hello, world!\"], \" \");\r\n    //FileSaver.saveAs(file);\r\n  };\r\n  return (\r\n    <div className=\"  row\">\r\n      <div class=\"bg-secondary card-header d-flex flex-row\">\r\n        <div class=\"p-2 col-sm-6\">Dashboard JSon structure</div>\r\n        <div class=\"p-2 text-right col-sm-3\">\r\n          <span\r\n            className=\"btn btn-primary btn-sm \"\r\n            onClick={generateJsonStructure}\r\n          >\r\n            Generat the structure\r\n          </span>\r\n        </div>\r\n        <div class=\"p-2 text-right col-sm-3\">\r\n          <span className=\"btn btn-success btn-sm \" onClick={saveJSonFile}>\r\n            Save the dashboard\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div className=\"card-body bg-light\">\r\n        <ReactJson src={file} collapsible view=\"dual\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GenerateComponent;\r\n"]},"metadata":{},"sourceType":"module"}